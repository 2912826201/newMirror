import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:mirror/constant/color.dart';

/// icon
/// Created by yangjiayi on 2021/2/23.

class AppIcon {
  static const String nav_return = "assets/svg/nav_return.svg";
  static const String nav_close = "assets/svg/nav_close.svg";
  static const String nav_camera = "assets/svg/nav_camera.svg";
  static const String nav_search = "assets/svg/nav_search.svg";
  static const String nav_share = "assets/svg/nav_share.svg";
  static const String nav_add_favorites = "assets/svg/nav_add_favorites.svg";
  static const String nav_more = "assets/svg/nav_more.svg";
  static const String nav_scan = "assets/svg/nav_scan.svg";
  static const String nav_settings = "assets/svg/nav_settings.svg";
  static const String nav_danmaku = "assets/svg/nav_danmaku.svg";
  static const String input_at = "assets/svg/input_at.svg";
  static const String input_keyboard = "assets/svg/input_keyboard.svg";
  static const String input_voice = "assets/svg/input_voice.svg";
  static const String input_gallery = "assets/svg/input_gallery.svg";
  static const String input_emotion = "assets/svg/input_emotion.svg";
  static const String input_search = "assets/svg/input_search.svg";
  static const String login_phone = "assets/svg/login_phone.svg";
  static const String login_apple = "assets/svg/login_apple.svg";
  static const String login_qq = "assets/svg/login_qq.svg";
  static const String login_wechat = "assets/svg/login_wechat.svg";
  static const String like_24 = "assets/svg/like_24.svg";
  static const String like_red_24 = "assets/svg/like_red_24.svg";
  static const String like_18 = "assets/svg/like_18.svg";
  static const String like_red_18 = "assets/svg/like_red_18.svg";
  static const String like_12 = "assets/svg/like_12.svg";
  static const String like_red_12 = "assets/svg/like_red_12.svg";
  static const String more_feed = "assets/svg/more_feed.svg";
  static const String comment_feed = "assets/svg/comment_feed.svg";
  static const String share_feed = "assets/svg/share_feed.svg";
  static const String location_feed = "assets/svg/location_feed.svg";
  static const String camera_switch = "assets/svg/camera_switch.svg";
  static const String gallery_fullsize = "assets/svg/gallery_fullsize.svg";
  static const String tag_location = "assets/svg/tag_location.svg";
  static const String tag_course_black = "assets/svg/tag_course_black.svg";
  static const String tag_course_white = "assets/svg/tag_course_white.svg";
  static const String check = "assets/svg/check.svg";
  static const String check_follow = "assets/svg/check_follow.svg";
  static const String topic = "assets/svg/topic.svg";
  static const String trash_bucket = "assets/svg/trash_bucket.svg";
  static const String clear_circle_grey = "assets/svg/clear_circle_grey.svg";
  static const String arrow_right_12 = "assets/svg/arrow_right_12.svg";
  static const String arrow_right_16 = "assets/svg/arrow_right_16.svg";
  static const String arrow_right_18 = "assets/svg/arrow_right_18.svg";
  static const String double_arrow_down_16 = "assets/svg/double_arrow_down_16.svg";
  static const String close_18 = "assets/svg/close_18.svg";
  static const String close_24 = "assets/svg/close_24.svg";
  static const String close_circle_16 = "assets/svg/close_circle_16.svg";
  static const String add_avatar_big = "assets/svg/add_avatar_big.svg";
  static const String add_gallery = "assets/svg/add_gallery.svg";
  static const String add_follow = "assets/svg/add_follow.svg";
  static const String add_circle_white = "assets/svg/add_circle_white.svg";
  static const String add_circle_black = "assets/svg/add_circle_black.svg";
  static const String delete = "assets/svg/delete.svg";
  static const String if_home = "assets/svg/if_home.svg";
  static const String if_training = "assets/svg/if_training.svg";
  static const String if_message = "assets/svg/if_message.svg";
  static const String if_profile = "assets/svg/if_profile.svg";
  static const String machine_connection = "assets/svg/machine_connection.svg";
  static const String machine_connected_18 = "assets/svg/machine_connected_18.svg";
  static const String machine_disconnected_18 = "assets/svg/machine_disconnected_18.svg";
  static const String machine_connected_28 = "assets/svg/machine_connected_28.svg";
  static const String machine_disconnected_28 = "assets/svg/machine_disconnected_28.svg";
  static const String volume = "assets/svg/volume.svg";
  static const String luminance = "assets/svg/luminance.svg";
  static const String filter = "assets/svg/filter.svg";
  static const String play_28 = "assets/svg/play_28.svg";
  static const String play_48 = "assets/svg/play_48.svg";
  static const String pause_28 = "assets/svg/pause_28.svg";
  static const String pause_48 = "assets/svg/pause_48.svg";
  static const String skip_previous_28 = "assets/svg/skip_previous_28.svg";
  static const String skip_previous_60 = "assets/svg/skip_previous_60.svg";
  static const String skip_next_28 = "assets/svg/skip_next_28.svg";
  static const String skip_next_60 = "assets/svg/skip_next_60.svg";
  static const String settings_24 = "assets/svg/settings_24.svg";
  static const String danmaku_on = "assets/svg/danmaku_on.svg";
  static const String danmaku_off = "assets/svg/danmaku_off.svg";
  static const String camera_24 = "assets/svg/camera_24.svg";
  static const String score_16 = "assets/svg/score_16.svg";
  static const String calorie_16 = "assets/svg/calorie_16.svg";
  static const String time_16 = "assets/svg/time_16.svg";
  static const String time_filled_16 = "assets/svg/time_filled_16.svg";
  static const String completed_16 = "assets/svg/completed_16.svg";
  static const String headset = "assets/svg/headset.svg";
  static const String dumbbell = "assets/svg/dumbbell.svg";
  static const String selection_selected = "assets/svg/selection_selected.svg";
  static const String selection_not_selected = "assets/svg/selection_not_selected.svg";
  static const String selection_remove = "assets/svg/selection_remove.svg";
  static const String group_chat_24 = "assets/svg/group_chat_24.svg";
  static const String at_16 = "assets/svg/at_16.svg";
  static const String message_send_error = "assets/svg/message_send_error.svg";
  static const String message_send = "assets/svg/message_send.svg";
  static const String message_delete = "assets/svg/message_delete.svg";
  static const String message_cant_send = "assets/svg/message_cant_send.svg";
  static const String message_emotion = "assets/svg/message_emotion.svg";
  static const String message_at = "assets/svg/message_at.svg";
  static const String message_comment = "assets/svg/message_comment.svg";
  static const String message_like = "assets/svg/message_like.svg";
  static const String avatar_live = "assets/svg/avatar_live.svg";
  static const String avatar_system = "assets/svg/avatar_system.svg";
  static const String avatar_training = "assets/svg/avatar_training.svg";
  static const String official = "assets/svg/official.svg";
  static const String profile_course = "assets/svg/profile_course.svg";
  static const String profile_order = "assets/svg/profile_order.svg";
  static const String profile_achievement = "assets/svg/profile_achievement.svg";
  static const String profile_record = "assets/svg/profile_record.svg";
  static const String profile_weight = "assets/svg/profile_weight.svg";
  static const String profile_gallery = "assets/svg/profile_gallery.svg";
  static const String profile_edit = "assets/svg/profile_edit.svg";
  static const String layout_vertical = "assets/svg/layout_vertical.svg";
  static const String layout_horizontal = "assets/svg/layout_horizontal.svg";
  static const String qrcode = "assets/svg/qrcode.svg";
  static const String collection_course = "assets/svg/collection_course.svg";
  static const String remocon_stop_74 = "assets/svg/remocon_stop_74.svg";
  static const String remocon_play_74 = "assets/svg/remocon_play_74.svg";
  static const String share_qq_circle = "assets/svg/share_qq_circle.svg";
  static const String share_qzone_circle = "assets/svg/share_qzone_circle.svg";
  static const String share_wechat_circle = "assets/svg/share_wechat_circle.svg";
  static const String share_moment_circle = "assets/svg/share_moment_circle.svg";
  static const String share_friend_circle = "assets/svg/share_friend_circle.svg";
  static const String share_browser_circle = "assets/svg/share_browser_circle.svg";
  static const String share_weibo_circle = "assets/svg/share_weibo_circle.svg";
  static const String share_download_circle = "assets/svg/share_download_circle.svg";
  static const String voice_microphone = "assets/svg/voice_microphone.svg";
  static const String voice_error = "assets/svg/voice_error.svg";
  static const String voice_cancel = "assets/svg/voice_cancel.svg";
  static const String volume_on_16 = "assets/svg/volume_on_16.svg";
  static const String volume_off_16 = "assets/svg/volume_off_16.svg";
  static const String pin_bubble_index_bar = "assets/svg/pin_bubble_index_bar.svg";
  static const String error_circle = "assets/svg/error_circle.svg";

  static Widget getAppIcon(String svgName, double iconSize,
      {double containerHeight, double containerWidth, Color color, Color bgColor, bool isCircle}) {
    if (containerHeight == null) {
      containerHeight = iconSize;
    }
    if (containerWidth == null) {
      containerWidth = iconSize;
    }
    if (bgColor == null) {
      bgColor = AppColor.transparent;
    }
    if (isCircle == null) {
      isCircle = false;
    }
    return Container(
      height: containerHeight,
      width: containerWidth,
      color: isCircle ? null : bgColor,
      decoration: isCircle
          ? BoxDecoration(
              color: bgColor,
              shape: BoxShape.circle,
            )
          : null,
      alignment: Alignment.center,
      child: SvgPicture.asset(
        svgName,
        height: iconSize,
        width: iconSize,
        color: color,
      ),
    );
  }
}

class AppIconButton extends StatefulWidget {
  AppIconButton({
    Key key,
    this.icon,
    this.svgName,
    this.pngName,
    @required this.iconSize,
    this.buttonHeight,
    this.buttonWidth,
    this.iconColor,
    this.bgColor = AppColor.transparent,
    this.isCircle = false,
    this.onTap,
  })  : assert(icon != null || svgName != null || pngName != null),
        assert(iconSize != null),
        super(key: key);

  final IconData icon;
  final String svgName;
  final String pngName;
  final Color iconColor;
  final Color bgColor;
  final Function() onTap;
  final double iconSize;
  final double buttonHeight;
  final double buttonWidth;
  final bool isCircle;

  @override
  _AppIconButtonState createState() => _AppIconButtonState();
}

class _AppIconButtonState extends State<AppIconButton> {
  bool isPressed = false;

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      behavior: HitTestBehavior.opaque,
      child: isPressed
          ? Opacity(
              opacity: 0.5,
              child: widget.icon != null
                  ? _buildIcon()
                  : widget.pngName != null
                      ? _buildPngIcon()
                      : _buildAppIcon(),
            )
          : widget.icon != null
              ? _buildIcon()
              : widget.pngName != null
                  ? _buildPngIcon()
                  : _buildAppIcon(),
      onTapDown: (details) {
        setState(() {
          isPressed = true;
        });
      },
      onTapUp: (details) {
        setState(() {
          isPressed = false;
        });
      },
      onTapCancel: () {
        setState(() {
          isPressed = false;
        });
      },
      onTap: widget.onTap,
    );
  }

  Widget _buildIcon() {
    return Container(
      width: widget.buttonWidth == null ? widget.iconSize : widget.buttonWidth,
      height: widget.buttonHeight == null ? widget.iconSize : widget.buttonHeight,
      color: widget.isCircle ? null : widget.bgColor,
      decoration: widget.isCircle
          ? BoxDecoration(
              color: widget.bgColor,
              shape: BoxShape.circle,
            )
          : null,
      alignment: Alignment.center,
      child: Icon(
        widget.icon,
        color: widget.iconColor,
        size: widget.iconSize,
      ),
    );
  }

  Widget _buildAppIcon() {
    return AppIcon.getAppIcon(
      widget.svgName,
      widget.iconSize,
      containerHeight: widget.buttonHeight == null ? widget.iconSize : widget.buttonHeight,
      containerWidth: widget.buttonWidth == null ? widget.iconSize : widget.buttonWidth,
      color: widget.iconColor,
      bgColor: widget.bgColor,
      isCircle: widget.isCircle,
    );
  }

  Widget _buildPngIcon() {
    return Container(
      width: widget.buttonWidth == null ? widget.iconSize : widget.buttonWidth,
      height: widget.buttonHeight == null ? widget.iconSize : widget.buttonHeight,
      color: widget.isCircle ? null : widget.bgColor,
      decoration: widget.isCircle
          ? BoxDecoration(
              color: widget.bgColor,
              shape: BoxShape.circle,
            )
          : null,
      alignment: Alignment.center,
      child: Image.asset(
        widget.pngName,
        width: widget.iconSize,
        height: widget.iconSize,
        fit: BoxFit.contain,
      ),
    );
  }
}
